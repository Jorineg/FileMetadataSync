services:
  file-metadata-sync:
    build: .
    container_name: file-metadata-sync
    env_file:
      - .env
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}
      - S3_BUCKET=${S3_BUCKET:-files}
      - SYNC_SOURCE_PATHS=${SYNC_SOURCE_PATHS}
      - SYNC_INTERVAL=${SYNC_INTERVAL:-900}
      - SYNC_WORKERS=${SYNC_WORKERS:-6}
      - LOG_LEVEL=${LOG_LEVEL:-INFO}
      - BETTERSTACK_SOURCE_TOKEN=${BETTERSTACK_SOURCE_TOKEN}
      - BETTERSTACK_INGEST_HOST=${BETTERSTACK_INGEST_HOST}
      - TIMEZONE=${TIMEZONE:-Europe/Berlin}
    volumes:
      # Map your NAS data directories here
      # Example: - /volume1/data:/data:ro
      - ${HOST_DATA_PATH}:/data:ro
      - ./logs:/app/logs
    restart: unless-stopped
