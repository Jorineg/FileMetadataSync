services:
  file-metadata-sync:
    build: .
    container_name: file-metadata-sync-local
    env_file:
      - .env
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_SERVICE_KEY=${SUPABASE_SERVICE_KEY}
      - S3_BUCKET=${S3_BUCKET:-files}
      - SYNC_SOURCE_PATcuHS=/data/test
      - SYNC_INTERVAL=${SYNC_INTERVAL:-900}
      - SYNC_WORKERS=${SYNC_WORKERS:-6}
      - LOG_LEVEL=${LOG_LEVEL:-DEBUG}
      - BETTERSTACK_SOURCE_TOKEN=${BETTERSTACK_SOURCE_TOKEN}
      - BETTERSTACK_INGEST_HOST=${BETTERSTACK_INGEST_HOST}
      - TIMEZONE=${TIMEZONE:-Europe/Berlin}
    volumes:
      - ./test_data:/data/test:ro
      - ./logs:/app/logs
    restart: unless-stopped
