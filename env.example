# ===========================================
# FileMetadataSync Configuration
# ===========================================

# PostgREST endpoint (required)
# Dedicated PostgREST instance for FMS
POSTGREST_URL=https://postgrest-fms.ibhelm.de

# FMS Service Secret (required)
# This single secret is used for:
#   1. API authentication (X-API-Key header to PostgREST proxy)
#   2. Database role password (fms_service role in PostgreSQL)
# Keep this secret secure - it provides full FMS access.
FMS_SERVICE_SECRET=your-fms-service-secret

# Supabase Storage (required for S3 uploads)
# Note: This is separate from PostgREST - used only for file storage
SUPABASE_URL=https://api.ibhelm.de
SUPABASE_SERVICE_KEY=your-service-role-key
S3_BUCKET=files

# ===========================================
# Sync Settings
# ===========================================

# Number of worker threads (default: 6)
# DS923+: 4-6 recommended
SYNC_WORKERS=6

# ===========================================
# Watcher Settings
# ===========================================

# Debounce time in seconds (default: 3.0)
DEBOUNCE_SECONDS=3.0

# Patterns to ignore (comma-separated)
# Default: *.tmp,*.temp,.DS_Store,Thumbs.db,*.partial,.syncing,@eaDir/*,#recycle/*,.SynologyWorkingDirectory/*
IGNORE_PATTERNS=

# ===========================================
# Full Scan Schedule
# ===========================================

# Hour of day for daily full scan (0-23, default: 3 = 3 AM)
FULL_SCAN_HOUR=3

# Run full scan on container startup (default: true)
FULL_SCAN_ON_STARTUP=true

# Force metadata update for all files, even if hash unchanged (default: false)
# Use temporarily to backfill fs_mtime/fs_ctime for existing files
FORCE_METADATA_UPDATE=false

# ===========================================
# Logging
# ===========================================

LOG_LEVEL=INFO
BETTERSTACK_SOURCE_TOKEN=
BETTERSTACK_INGEST_HOST=

# Timezone (default: Europe/Berlin)
TIMEZONE=Europe/Berlin
